{
  "hash": "92157b5b7dadd606fbb5900b2060213b",
  "result": {
    "markdown": "---\ntitle: \"chatGPT\"\nsubtitle: \"OpenAI 다중 모드성(Multimodality)\"\nauthor:\n  - name: 이광춘\n    url: https://www.linkedin.com/in/kwangchunlee/\n    affiliation: 한국 R 사용자회\n    affiliation-url: https://github.com/bit2r\ntitle-block-banner: true\n#title-block-banner: \"#562457\"\nformat:\n  html:\n    css: css/quarto.css\n    theme: flatly\n    code-fold: true\n    toc: true\n    toc-depth: 3\n    toc-title: 목차\n    number-sections: true\n    highlight-style: github    \n    self-contained: false\nfilters:\n   - lightbox\nlightbox: auto\nlink-citations: true\nknitr:\n  opts_chunk: \n    message: false\n    warning: false\n    collapse: true\n    comment: \"#>\" \n    R.options:\n      knitr.graphics.auto_pdf: true\neditor_options: \n  chunk_output_type: console\nbibliography: bibliography.bib\ncsl: apa-single-spaced.csl    \neditor: \n  markdown: \n    wrap: sentence\n---\n\n\n# API 설정\n\n2023년 11월 열린 OpenAI 개발자 컨퍼런스에서 기존 OpenAI API 인터페이스가 대대적인 개선작업이 이뤄졌다.\n\n# 텍스트\n\nOpenAI의 다중 모드성 API를 사용하여 한국의 유명 인사들에 대한 정보를 조회하고 처리하는 과정을 보여준다. 먼저, 필요한 라이브러리들을 임포트하고, 환경변수를 로드한다. OpenAI 클라이언트를 초기화하고, GPT-3.5 모델을 이용하여 '대한민국 최고 유명인 3명'에 대한 질문을 제출한다. 이 요청은 JSON 형식의 출력을 반환하도록 설정되어 있다. 반환된 JSON 문자열은 파싱되어 Python 딕셔너리로 변환되며, 딕셔너리를 Pandas DataFrame으로 변환되어 출력된다. OpenAI API를 활용하여 텍스트 데이터를 구조화하는 전형적인 방법을 보여준다.\n\n\n::: {.cell}\n\n```{.python .cell-code}\nimport os\nfrom openai import OpenAI\nfrom dotenv import load_dotenv\nimport json\nimport pandas as pd\n\nload_dotenv()\n\nclient = OpenAI(\n    api_key=os.getenv('OPENAI_API_KEY'),\n)\n\ntext_response = client.chat.completions.create(\n    model=\"gpt-3.5-turbo-1106\",\n    max_tokens=256,\n    temperature=0,\n    messages=[\n        {\n            \"role\": \"system\",\n            \"content\": \"대한민국 최고 역사전문가로 역할을 수행해줘. 출력결과는 JSON 형식으로 부탁해\",\n        },      \n        {\n            \"role\": \"user\",\n            \"content\": \"대한민국 최고 유명인 3 명은 누구야?\",\n        }\n    ],\n    response_format={ \"type\": \"json_object\" }\n)\n\n\n# JSON 문자열 예시\ntext_output_json = text_response.choices[0].message.content\ntext_dict = json.loads(text_output_json)\n\ntext_df = pd.DataFrame(list(text_dict.values()), index=text_dict.keys(), columns=['유명인'])\nprint(text_df)\n```\n:::\n\n\n```\n   유명인\n1  윤보선\n2   김구\n3  유관순\n```\n\n# 이미지\n\n[Teemu Maatta, \"How to use GPT-4 Vision API? - OpenAI released today API for GPT-4 Turbo Vision. In this tutorial, I will build you an application using this SOTA model.\", medium, 2023-11-07](https://medium.com/@tmmtt/how-to-use-gpt-4-vision-api-ba6b57af569c)\n\n## 이미지 &rarr; 텍스트\n\n`gpt-4-vision-preview` 모형을 사용해서 이미지를 설명하는 텍스트를 생성하도록 한다.\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\nimage_response = client.chat.completions.create(\n    model=\"gpt-4-vision-preview\",\n    messages=[\n        {\n            \"role\": \"system\",\n            \"content\": \"대한민국 최고 역사전문가로 역할을 수행해줘.\",\n        },      \n        {\n            \"role\": \"user\",\n            \"content\": [\n                { \n                  \"type\": \"text\", \n                  \"text\": \"이미지를 설명해주세요.\"\n                },\n                {\n                  \"type\": \"image_url\",\n                  \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/4/4e/An_Jung-geun.JPG\"\n                },\n            ],\n        }\n    ],\n    max_tokens=500\n)\n\nprint(image_response.choices[0].message.content)\n```\n:::\n\n\n\n::: columns\n::: column\n\n![](https://upload.wikimedia.org/wikipedia/commons/4/4e/An_Jung-geun.JPG)\n\n:::\n::: column\n\n사진 속 인물은 어두운색의 자켓을 입고 있으며, 배경은 흰색으로 보이는 벽으로 추정됩니다. 이 사람은 카메라를 직시하고 있는데, 표정은 비교적 평온해 보입니다. 사진의 색조와 품질을 통해 추정컨대 오래된 사진으로 보입니다. 이 사람의 정체에 관한 정보가 없으므로, 구체적인 역사적 배경이나 이 인물에 대한 자세한 정보를 제공하기는 어렵습니다.\n\n:::\n:::::\n\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}