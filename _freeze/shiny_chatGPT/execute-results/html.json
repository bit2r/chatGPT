{
  "hash": "cc1d25bc92f5e0c99bf11fa9640bdc9c",
  "result": {
    "markdown": "---\ntitle: \"챗GPT\"\nsubtitle: \"Shiny 챗GPT\"\ndescription: |\n  Shiny로 챗GPT를 구현한다.\nauthor:\n  - name: 이광춘\n    url: https://www.linkedin.com/in/kwangchunlee/\n    affiliation: 한국 R 사용자회\n    affiliation-url: https://github.com/bit2r\ndate: today    \ntitle-block-banner: true\n#title-block-banner: \"#562457\"\nformat:\n  html:\n    css: css/quarto.css\n    theme: flatly\n    code-fold: true\n    code-overflow: wrap\n    toc: true\n    toc-depth: 3\n    toc-title: 목차\n    number-sections: true\n    highlight-style: github    \n    self-contained: false\nfilters:\n   - lightbox\nlightbox: auto\nlink-citations: true\nknitr:\n  opts_chunk: \n    message: false\n    warning: false\n    collapse: true\n    comment: \"#>\" \n    R.options:\n      knitr.graphics.auto_pdf: true\neditor_options: \n  chunk_output_type: console\neditor: \n  markdown: \n    wrap: 72\n---\n\n\n# ChatGPT\n\n챗GPT API를 활용하여 자체 앱을 개발할 경우 특정 요구 사항에 맞는 사용자 지정 인터페이스를 만들 수 있다는 장점 외에 다음과 같은 장단점이 제기된다.\n\n- 웹사이트 로고를 넣고 다른 자체 시스템과 통합할 수 있다.\n- 기존 서비스에 챗봇 기능 추가\n- 챗GPT 월간 유료 구독비용보다 저렴하다.\n    - 특히, 사용자가 100명 넘어갈 경우 API를 통한 서비스 사용이 비용적인 측면에서 매력이 있다.\n    - 예를 들어, 100명이 유료 구독할 경우 대략 \\$2,000 달러가 비용으로 책정되는데 현재 환율기준 `1,300월/\\$` 대략 260만원인데 10,000번 호출할 경우 대략 \\$1,800 달러면 해결된다.\n\n\n# 비용\n\n[출처: [OpenAI API Pricing calculator](https://gptforwork.com/tools/openai-chatgpt-api-pricing-calculator)]{.aside}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(gt)\nlibrary(gtExtras)\n\ncost_raw <- tibble::tribble(\n  ~`Tokens.per.execution\tWords.per.execution\tPrice.for.1.execution`,\n                                                        \"Price for\",\n                                                            \"10000\",\n                                                       \"executions\",\n                                         \"10\\t8\\t~$0.00045\\t~$4.50\",\n                                        \"20\\t15\\t~$0.00090\\t~$9.00\",\n                                       \"50\\t38\\t~$0.00225\\t~$22.50\",\n                                      \"100\\t75\\t~$0.00450\\t~$45.00\",\n                                     \"200\\t150\\t~$0.00900\\t~$90.00\",\n                                    \"500\\t375\\t~$0.02250\\t~$225.00\",\n                                   \"1000\\t750\\t~$0.04500\\t~$450.00\",\n                                  \"2000\\t1500\\t~$0.09000\\t~$900.00\",\n                                 \"4000\\t3000\\t~$0.18000\\t~$1800.00\"\n  )\n\ncost_raw |> \n  janitor::clean_names() |> \n  set_names(\"data\") |> \n  mutate(data = map(data, str_split, pattern = \"\\t\")) |> \n  unnest(data) |> \n  mutate(ncol = map_int(data, length)) |> \n  filter(ncol == 4) |> \n  mutate(tokens = map_chr(data, 1),\n         words = map_chr(data, 2),\n         unit_cost = map_chr(data, 3),\n         ttl_cost =  map_chr(data, 4)) |> \n  mutate(ttl_cost = parse_number(ttl_cost)) |> \n  select(-data, -ncol) |> \n  mutate(tokens = parse_number(tokens),\n         words  = parse_number(words)) |> \n  gt::gt() |> \n    gt_theme_538() |> \n    cols_align(\"center\") |> \n    fmt_integer(columns = c(ttl_cost, words, tokens)) |> \n    tab_footnote(\n      footnote = \"챗GPT 유료계정 $20 x 100명, $2,000 기준\",\n      locations = cells_body(columns = ttl_cost, rows = 9)\n    ) |> \n  tab_header(\n    title = html(\"챗GPT4 API 호출횟수와 유료계정\"),\n    subtitle = html(\"GPT-4 API 10,000번 호출 기준\")\n  )\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"bdkcgjlopb\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>@import url(\"https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\n#bdkcgjlopb table {\n  font-family: Chivo, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#bdkcgjlopb thead, #bdkcgjlopb tbody, #bdkcgjlopb tfoot, #bdkcgjlopb tr, #bdkcgjlopb td, #bdkcgjlopb th {\n  border-style: none;\n}\n\n#bdkcgjlopb p {\n  margin: 0;\n  padding: 0;\n}\n\n#bdkcgjlopb .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: 300;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: none;\n  border-top-width: 3px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#bdkcgjlopb .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#bdkcgjlopb .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#bdkcgjlopb .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#bdkcgjlopb .gt_heading {\n  background-color: #FFFFFF;\n  text-align: left;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#bdkcgjlopb .gt_bottom_border {\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bdkcgjlopb .gt_col_headings {\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#bdkcgjlopb .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: normal;\n  text-transform: uppercase;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#bdkcgjlopb .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: normal;\n  text-transform: uppercase;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#bdkcgjlopb .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#bdkcgjlopb .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#bdkcgjlopb .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#bdkcgjlopb .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#bdkcgjlopb .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: bolder;\n  text-transform: uppercase;\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #000000;\n  border-bottom-style: solid;\n  border-bottom-width: 1px;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#bdkcgjlopb .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: bolder;\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #000000;\n  border-bottom-style: solid;\n  border-bottom-width: 1px;\n  border-bottom-color: #FFFFFF;\n  vertical-align: middle;\n}\n\n#bdkcgjlopb .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#bdkcgjlopb .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#bdkcgjlopb .gt_row {\n  padding-top: 3px;\n  padding-bottom: 3px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#bdkcgjlopb .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 80%;\n  font-weight: bolder;\n  text-transform: uppercase;\n  border-right-style: solid;\n  border-right-width: 0px;\n  border-right-color: #FFFFFF;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bdkcgjlopb .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#bdkcgjlopb .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#bdkcgjlopb .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#bdkcgjlopb .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bdkcgjlopb .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#bdkcgjlopb .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#bdkcgjlopb .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bdkcgjlopb .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bdkcgjlopb .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#bdkcgjlopb .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bdkcgjlopb .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#bdkcgjlopb .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bdkcgjlopb .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#bdkcgjlopb .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bdkcgjlopb .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#bdkcgjlopb .gt_sourcenote {\n  font-size: 12px;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bdkcgjlopb .gt_left {\n  text-align: left;\n}\n\n#bdkcgjlopb .gt_center {\n  text-align: center;\n}\n\n#bdkcgjlopb .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#bdkcgjlopb .gt_font_normal {\n  font-weight: normal;\n}\n\n#bdkcgjlopb .gt_font_bold {\n  font-weight: bold;\n}\n\n#bdkcgjlopb .gt_font_italic {\n  font-style: italic;\n}\n\n#bdkcgjlopb .gt_super {\n  font-size: 65%;\n}\n\n#bdkcgjlopb .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#bdkcgjlopb .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#bdkcgjlopb .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#bdkcgjlopb .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#bdkcgjlopb .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#bdkcgjlopb .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#bdkcgjlopb .gt_indent_5 {\n  text-indent: 25px;\n}\n\ntbody tr:last-child {\n  border-bottom: 2px solid #ffffff00;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"4\" class=\"gt_heading gt_title gt_font_normal\" style>챗GPT4 API 호출횟수와 유료계정</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"4\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>GPT-4 API 10,000번 호출 기준</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"tokens\">tokens</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"words\">words</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"unit_cost\">unit_cost</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black;\" scope=\"col\" id=\"ttl_cost\">ttl_cost</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"tokens\" class=\"gt_row gt_center\">10</td>\n<td headers=\"words\" class=\"gt_row gt_center\">8</td>\n<td headers=\"unit_cost\" class=\"gt_row gt_center\">~$0.00045</td>\n<td headers=\"ttl_cost\" class=\"gt_row gt_center\">4</td></tr>\n    <tr><td headers=\"tokens\" class=\"gt_row gt_center\">20</td>\n<td headers=\"words\" class=\"gt_row gt_center\">15</td>\n<td headers=\"unit_cost\" class=\"gt_row gt_center\">~$0.00090</td>\n<td headers=\"ttl_cost\" class=\"gt_row gt_center\">9</td></tr>\n    <tr><td headers=\"tokens\" class=\"gt_row gt_center\">50</td>\n<td headers=\"words\" class=\"gt_row gt_center\">38</td>\n<td headers=\"unit_cost\" class=\"gt_row gt_center\">~$0.00225</td>\n<td headers=\"ttl_cost\" class=\"gt_row gt_center\">22</td></tr>\n    <tr><td headers=\"tokens\" class=\"gt_row gt_center\">100</td>\n<td headers=\"words\" class=\"gt_row gt_center\">75</td>\n<td headers=\"unit_cost\" class=\"gt_row gt_center\">~$0.00450</td>\n<td headers=\"ttl_cost\" class=\"gt_row gt_center\">45</td></tr>\n    <tr><td headers=\"tokens\" class=\"gt_row gt_center\">200</td>\n<td headers=\"words\" class=\"gt_row gt_center\">150</td>\n<td headers=\"unit_cost\" class=\"gt_row gt_center\">~$0.00900</td>\n<td headers=\"ttl_cost\" class=\"gt_row gt_center\">90</td></tr>\n    <tr><td headers=\"tokens\" class=\"gt_row gt_center\">500</td>\n<td headers=\"words\" class=\"gt_row gt_center\">375</td>\n<td headers=\"unit_cost\" class=\"gt_row gt_center\">~$0.02250</td>\n<td headers=\"ttl_cost\" class=\"gt_row gt_center\">225</td></tr>\n    <tr><td headers=\"tokens\" class=\"gt_row gt_center\">1,000</td>\n<td headers=\"words\" class=\"gt_row gt_center\">750</td>\n<td headers=\"unit_cost\" class=\"gt_row gt_center\">~$0.04500</td>\n<td headers=\"ttl_cost\" class=\"gt_row gt_center\">450</td></tr>\n    <tr><td headers=\"tokens\" class=\"gt_row gt_center\">2,000</td>\n<td headers=\"words\" class=\"gt_row gt_center\">1,500</td>\n<td headers=\"unit_cost\" class=\"gt_row gt_center\">~$0.09000</td>\n<td headers=\"ttl_cost\" class=\"gt_row gt_center\">900</td></tr>\n    <tr><td headers=\"tokens\" class=\"gt_row gt_center\">4,000</td>\n<td headers=\"words\" class=\"gt_row gt_center\">3,000</td>\n<td headers=\"unit_cost\" class=\"gt_row gt_center\">~$0.18000</td>\n<td headers=\"ttl_cost\" class=\"gt_row gt_center\">1,800<span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"4\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span> 챗GPT 유료계정 $20 x 100명, $2,000 기준</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n# 자체 앱 구출\n\nGitHub 저장소 [deepanshu88/shinyChatGPT](https://github.com/deepanshu88/shinyChatGPT) 코드를 바탕으로 로고와 메시지를 바꾸면 Shiny 챗GPT 앱을 간단히 구현할 수 있다.\n\n:::::{.columns}\n:::{.column}\n\n![](images/shinyGPT.gif)\n\n:::\n\n:::{.column}\n\n![](images/km_chatgpt.jpg)\n\n:::\n\n:::::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}