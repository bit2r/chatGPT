<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko" xml:lang="ko"><head>
    <meta charset="utf-8">
    <meta name="generator" content="quarto-1.4.288">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


    <title>chatGPT - 파인콘</title>
    <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      div.columns{display: flex; gap: min(4vw, 1.5em);}
      div.column{flex: auto; overflow-x: auto;}
      div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
      ul.task-list{list-style: none;}
      ul.task-list li input[type="checkbox"] {
        width: 0.8em;
        margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
        vertical-align: middle;
      }
      /* CSS for syntax highlighting */
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
        }
      pre.numberSource { margin-left: 3em;  padding-left: 4px; }
      div.sourceCode
        {   }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
    </style>

    <style>
      body.hypothesis-enabled #quarto-embed-header {
        padding-right: 36px;
      }

      #quarto-embed-header {
        height: 3em;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: solid 1px;
      }

      #quarto-embed-header h6 {
        font-size: 1.1em;
        padding-top: 0.6em;
        margin-left: 1em;
        margin-right: 1em;
        font-weight: 400;
      }

      #quarto-embed-header a.quarto-back-link,
      #quarto-embed-header a.quarto-download-embed {
        font-size: 0.8em;
        margin-top: 1em;
        margin-bottom: 1em;
        margin-left: 1em;
        margin-right: 1em;
      }

      .quarto-back-container {
        padding-left: 0.5em;
        display: flex;
      }

      .headroom {
          will-change: transform;
          transition: transform 200ms linear;
      }

      .headroom--pinned {
          transform: translateY(0%);
      }

      .headroom--unpinned {
          transform: translateY(-100%);
      }      
    </style>

    <script>
    window.document.addEventListener("DOMContentLoaded", function () {

      var header = window.document.querySelector("#quarto-embed-header");
      const titleBannerEl = window.document.querySelector("body > #title-block-header");
      if (titleBannerEl) {
        titleBannerEl.style.paddingTop = header.clientHeight + "px";
      }
      const contentEl = window.document.getElementById('quarto-content');
      for (const child of contentEl.children) {
        child.style.paddingTop = header.clientHeight + "px";
        child.style.marginTop = "1em";
      }

      // Use the article root if the `back` call doesn't work. This isn't perfect
      // but should typically work
      window.quartoBackToArticle = () => {
        var currentUrl = window.location.href;
        window.history.back();
        setTimeout(() => {
            // if location was not changed in 100 ms, then there is no history back
            if(currentUrl === window.location.href){              
                // redirect to site root
                window.location.href = '/';
            }
        }, 100);
      }

      const headroom = new window.Headroom(header, {
        tolerance: 5,
        onPin: function () {
        },
        onUnpin: function () {
        },
      });
      headroom.init();
    });
    </script>

    
<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/profile.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
     <script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "keyboard-shortcut": [
    null
  ],
  "language": {
    "search-no-results-text": "일치 없음",
    "search-matching-documents-text": "일치된 문서",
    "search-copy-link-title": "검색 링크 복사",
    "search-hide-matches-text": "추가 검색 결과 숨기기",
    "search-more-match-text": "추가 검색결과",
    "search-more-matches-text": "추가 검색결과",
    "search-clear-button-title": "제거",
    "search-detached-cancel-button-title": "취소",
    "search-submit-button-title": "검색",
    "search-label": "검색"
  }
}</script>  
<script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-229551680-1', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script>  
        <link rel="stylesheet" href="../css/quarto.css">
      </head>

  <body class="floating nav-fixed quarto-notebook">
    <div id="quarto-embed-header" class="headroom fixed-top bg-primary">
      
      <a onclick="window.quartoBackToArticle(); return false;" class="btn btn-primary quarto-back-link"><i class="bi bi-caret-left"></i> 기사로 돌아가기</a>
      <h6><i class="bi bi-journal-code"></i> 벡터 DB 쥬피터 노트북</h6>

            <a href="../jupyterlab/pinecone.ipynb" class="btn btn-primary quarto-download-embed" download="pinecone.ipynb">노트북 다운로드</a>
          </div>

     <div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">chatGPT</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="검색"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="탐색 전환" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ai" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">생성 AI</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-ai">    
        <li>
    <a class="dropdown-item" href="../architecture.html" rel="" target="">
 <span class="dropdown-text">chatGPT 이해</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../trends.html" rel="" target="">
 <span class="dropdown-text">추세 트렌드</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../why_llm.html" rel="" target="">
 <span class="dropdown-text">왜 거대언어모형인가?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../nlp_LLM.html" rel="" target="">
 <span class="dropdown-text">NLP와 LLM</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../gpt4_performance.html" rel="" target="">
 <span class="dropdown-text">GPT-4 성능</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../gpt-security.html" rel="" target="">
 <span class="dropdown-text">챗GPT 보안사고</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../interface.html" rel="" target="">
 <span class="dropdown-text">인터페이스</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../open_source.html" rel="" target="">
 <span class="dropdown-text">오픈소스 S/W LLM</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-chatgpt-응용사례" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">chatGPT 응용사례</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-chatgpt-응용사례">    
        <li>
    <a class="dropdown-item" href="../use-cases.html" rel="" target="">
 <span class="dropdown-text">활용사례</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../intro_avi.html" rel="" target="">
 <span class="dropdown-text">법인 R 소개영상</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../macbook.html" rel="" target="">
 <span class="dropdown-text">맥북 투척사건</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../office.html" rel="" target="">
 <span class="dropdown-text">오피스 전쟁</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../news_article.html" rel="" target="">
 <span class="dropdown-text">보도자료 작성</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../intro_book.html" rel="" target="">
 <span class="dropdown-text">데이터 과학 책</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../intro_paper.html" rel="" target="">
 <span class="dropdown-text">논문 초록</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../rnd.html" rel="" target="">
 <span class="dropdown-text">학술연구(R&amp;D)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../yuji.html" rel="" target="">
 <span class="dropdown-text">멤버 Yuji</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../stable_diffusion.html" rel="" target="">
 <span class="dropdown-text">Stable Diffusion</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../text_to_images.html" rel="" target="">
 <span class="dropdown-text">Text-to-Images</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../text2image.html" rel="" target="">
 <span class="dropdown-text"><code>bitGPT</code> Text-to-Image</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../samsung.html" rel="" target="">
 <span class="dropdown-text">삼전 주가예측</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../calculator.html" rel="" target="">
 <span class="dropdown-text">계산기 프로그램</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../rcoding.html" rel="" target="">
 <span class="dropdown-text">GPT R 코딩개발</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../rcoding-copilot.html" rel="" target="">
 <span class="dropdown-text">부조종사 R 코딩개발</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../math.html" rel="" target="">
 <span class="dropdown-text">수학: MIT / 수능</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../middle_school.html" rel="" target="">
 <span class="dropdown-text">Shiny 앱</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../inaugural.html" rel="" target="">
 <span class="dropdown-text">대통령 취임사</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../translation.html" rel="" target="">
 <span class="dropdown-text">번역(영한, 한영)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../gg_grouping.html" rel="" target="">
 <span class="dropdown-text">챗GPT 팀구성</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../biz_number_API.html" rel="" target="">
 <span class="dropdown-text">사업자등록증 API (국세청)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-prompt-eng." role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Prompt Eng.</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-prompt-eng.">    
        <li>
    <a class="dropdown-item" href="../prompt.html" rel="" target="">
 <span class="dropdown-text">Prompt Engineering</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../prompt_adv.html" rel="" target="">
 <span class="dropdown-text">Advanced Prompt Engineering</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../prompt_in_practice.html" rel="" target="">
 <span class="dropdown-text">프롬프트 실무</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../prompt_for_develoopers.html" rel="" target="">
 <span class="dropdown-text">(개발자) 프롬프트 공학</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../prompt_data_science.html" rel="" target="">
 <span class="dropdown-text">데이터 과학 프롬프트</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../interview.html" rel="" target="">
 <span class="dropdown-text">데이터 과학 인터뷰</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">자동화/개발</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-">    
        <li>
    <a class="dropdown-item" href="../ide.html" rel="" target="">
 <span class="dropdown-text">통합개발환경(IDE)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../reticulate.html" rel="" target="">
 <span class="dropdown-text">파이썬 환경구축</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../openAI_api.html" rel="" target="">
 <span class="dropdown-text">OpenAI API 프로그래밍</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../openAI_api_apps.html" rel="" target="">
 <span class="dropdown-text">OpenAI API 응용프로그램</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../langchain_arch.html" rel="" target="">
 <span class="dropdown-text">LangCahin 아키텍쳐</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../whisper.html" rel="" target="">
 <span class="dropdown-text">오정보 음성인식(Whisper)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../news_release.html" rel="" target="">
 <span class="dropdown-text">오정보 요약</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../misinfo_embedding.html" rel="" target="">
 <span class="dropdown-text">오정보 임베딩</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../shiny_chatGPT.html" rel="" target="">
 <span class="dropdown-text">Shiny 챗GPT</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../palmer_penguins.html" rel="" target="">
 <span class="dropdown-text">펭귄 데이터셋</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../penguins_analytics.html" rel="" target="">
 <span class="dropdown-text">챗GPT 펭귄 데이터 분석</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../three_paradigm.html" rel="" target="">
 <span class="dropdown-text">AI 분석 도구</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../penguin_analysis.html" rel="" target="">
 <span class="dropdown-text">심슨 패러독스</span></a>
  </li>  
        <li class="dropdown-header">데이터 과학 AutoGPT</li>
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../pandasai.html" rel="" target="">
 <span class="dropdown-text">판다스 AI</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../llama_penguins.html" rel="" target="">
 <span class="dropdown-text">펭귄: 라마인덱스</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sql_openai.html" rel="" target="">
 <span class="dropdown-text">챗GPT SQL</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../hf.html" rel="" target="">
 <span class="dropdown-text">Hugging Face</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../hf_windows.html" rel="" target="">
 <span class="dropdown-text">Hugging Face(윈도우)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../hf_pipeline.html" rel="" target="">
 <span class="dropdown-text">HF 파이프라인</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../koGPT.html" rel="" target="">
 <span class="dropdown-text">HuggingfaceR - 모형통계</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../BERT.html" rel="" target="">
 <span class="dropdown-text">BERT</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../blog.html" rel="" target="">
 <span class="menu-text">게시글</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu--1" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">비즈니스</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu--1">    
        <li>
    <a class="dropdown-item" href="../chatGPT_overview.html" rel="" target="">
 <span class="dropdown-text">챗GPT 개요</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/bit2r/chatGPT" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://r2bit.com" rel="" target="">
 <span class="menu-text">R사용자회</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/LAION-AI/Open-Assistant" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text">Open Assistant</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://rtutor.ai/" rel="" target="">
 <span class="menu-text">RTutor</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="다크 모드 전환"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">목차</h2>
   
  <ul>
  <li><a href="#환경설정" id="toc-환경설정" class="nav-link active" data-scroll-target="#환경설정">환경설정</a></li>
  <li><a href="#벡터-데이터베이스" id="toc-벡터-데이터베이스" class="nav-link" data-scroll-target="#벡터-데이터베이스">벡터 데이터베이스</a></li>
  <li><a href="#데이터-넣기" id="toc-데이터-넣기" class="nav-link" data-scroll-target="#데이터-넣기">데이터 넣기</a></li>
  <li><a href="#데이터-추출" id="toc-데이터-추출" class="nav-link" data-scroll-target="#데이터-추출">데이터 추출</a></li>
  <li><a href="#오정보-미트업" id="toc-오정보-미트업" class="nav-link" data-scroll-target="#오정보-미트업">오정보 미트업</a>
  <ul class="collapse">
  <li><a href="#텍스트-데이터" id="toc-텍스트-데이터" class="nav-link" data-scroll-target="#텍스트-데이터">텍스트 데이터</a></li>
  </ul></li>
  <li><a href="#토큰수" id="toc-토큰수" class="nav-link" data-scroll-target="#토큰수">토큰수</a>
  <ul class="collapse">
  <li><a href="#정규표현식" id="toc-정규표현식" class="nav-link" data-scroll-target="#정규표현식">정규표현식</a></li>
  </ul></li>
  <li><a href="#tiktoken" id="toc-tiktoken" class="nav-link" data-scroll-target="#tiktoken"><code>tiktoken</code></a></li>
  <li><a href="#임베딩" id="toc-임베딩" class="nav-link" data-scroll-target="#임베딩">임베딩</a></li>
  <li><a href="#텍스트-쪼개기" id="toc-텍스트-쪼개기" class="nav-link" data-scroll-target="#텍스트-쪼개기">텍스트 쪼개기</a></li>
  <li><a href="#임베딩-1" id="toc-임베딩-1" class="nav-link" data-scroll-target="#임베딩-1">임베딩</a></li>
  <li><a href="#벡터-데이터베이스-1" id="toc-벡터-데이터베이스-1" class="nav-link" data-scroll-target="#벡터-데이터베이스-1">벡터 데이터베이스</a></li>
  <li><a href="#임베딩-db-삽입" id="toc-임베딩-db-삽입" class="nav-link" data-scroll-target="#임베딩-db-삽입">임베딩 DB 삽입</a></li>
  <li><a href="#검색" id="toc-검색" class="nav-link" data-scroll-target="#검색">검색</a></li>
  <li><a href="#시각화" id="toc-시각화" class="nav-link" data-scroll-target="#시각화">시각화</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">      <header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">파인콘</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> 코드</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">전체 코드 표시</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">전체 코드 숨기기</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>     <div id="37bbc91f-e276-46da-88fa-dfbdb9d10dc5" class="cell markdown">
<section id="환경설정" class="level2">
<h2 class="anchored" data-anchor-id="환경설정">환경설정</h2>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [4]:</pre></div><div id="misinfo-setup" class="cell" data-tags="[]" data-execution_count="4">
<details open="">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># !pip install pinecone-client</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> dotenv</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pinecone</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dotenv <span class="im">import</span> load_dotenv, find_dotenv</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>_ <span class="op">=</span> load_dotenv(find_dotenv())</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>pinecone.init(</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    api_key<span class="op">=</span>os.getenv(<span class="st">"PINECONE_API_KEY"</span>),</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    environment<span class="op">=</span>os.getenv(<span class="st">"PINECONE_API_ENV"</span>),</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div></div>
<div id="9978b10e-ed89-4e06-a9f7-0bc78fa2c612" class="cell markdown">
<section id="벡터-데이터베이스" class="level2">
<h2 class="anchored" data-anchor-id="벡터-데이터베이스">벡터 데이터베이스</h2>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [47]:</pre></div><div id="misinfo-index" class="cell" data-tags="[]" data-execution_count="47">
<details open="">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pinecone.create_index("helloworld-index", dimension=1024)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>active_indexes <span class="op">=</span> pinecone.list_indexes()</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>index_description <span class="op">=</span> pinecone.describe_index(<span class="st">"helloworld-index"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>active_indexes<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>index_description<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>['helloworld-index']: IndexDescription(name='helloworld-index', metric='cosine', replicas=1, dimension=4.0, shards=1, pods=1, pod_type='p1', status={'ready': True, 'state': 'Ready'}, metadata_config=None, source_collection='')</code></pre>
</div>
</div></div>
<div id="f25c0f9a-e976-44de-803d-6123bcabb756" class="cell markdown">
<section id="데이터-넣기" class="level2">
<h2 class="anchored" data-anchor-id="데이터-넣기">데이터 넣기</h2>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [48]:</pre></div><div id="misinfo-insert" class="cell" data-tags="[]" data-execution_count="48">
<details open="">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>index <span class="op">=</span> pinecone.Index(<span class="st">"helloworld-index"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>upsert_response <span class="op">=</span> index.upsert(</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    vectors<span class="op">=</span>[</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>        (</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>         <span class="st">"vec1"</span>,                <span class="co"># Vector ID </span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>         [<span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="fl">0.4</span>],  <span class="co"># Dense vector values</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>         {<span class="st">"genre"</span>: <span class="st">"drama"</span>}     <span class="co"># Vector metadata</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        (</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>         <span class="st">"vec2"</span>, </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>         [<span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="fl">0.4</span>, <span class="fl">0.5</span>], </span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>         {<span class="st">"genre"</span>: <span class="st">"action"</span>}</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    namespace<span class="op">=</span><span class="st">"helloworld-namespace"</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div></div>
<div id="bc5d3820-5e8b-4c35-96cf-46e93f8b714c" class="cell markdown">
<section id="데이터-추출" class="level2">
<h2 class="anchored" data-anchor-id="데이터-추출">데이터 추출</h2>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [49]:</pre></div><div id="cell-misinfo-fetch" class="cell" data-tags="[]" data-execution_count="49">
<details open="">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>fetch_response <span class="op">=</span> index.fetch(ids<span class="op">=</span>[<span class="st">"vec1"</span>, <span class="st">"vec2"</span>], namespace<span class="op">=</span><span class="st">"helloworld-namespace"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>fetch_response[<span class="st">'vectors'</span>][<span class="st">'vec2'</span>][<span class="st">'values'</span>]</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># print(fetch_response['values'])</span></span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="misinfo-fetch" class="cell-output cell-output-display" data-execution_count="49">
<pre><code>[0.2, 0.3, 0.4, 0.5]</code></pre>
</div>
</div></div>
<div id="7ff83070-7fc7-4367-ab77-929b3a22fc9b" class="cell markdown">
<section id="오정보-미트업" class="level1">
<h1>오정보 미트업</h1>
<section id="텍스트-데이터" class="level2">
<h2 class="anchored" data-anchor-id="텍스트-데이터">텍스트 데이터</h2>
</section>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [6]:</pre></div><div id="misinfo-txt" class="cell" data-tags="[]" data-execution_count="6">
<details open="">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'../data/LibriSpeech/misinfo_chatGPT.txt'</span>, <span class="st">'r'</span>) <span class="im">as</span> f:</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    contents <span class="op">=</span> f.read()</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(contents[:<span class="dv">100</span>])</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Well, thank you very much, Dr. Ahn. This is a real pleasure to be able to speak across the ocean. I </code></pre>
</div>
</div></div>
<div id="7509bd08-18d3-44c4-b95d-808e982c6466" class="cell markdown">
<section id="토큰수" class="level2">
<h2 class="anchored" data-anchor-id="토큰수">토큰수</h2>
<p>https://platform.openai.com/docs/guides/embeddings/what-are-embeddings</p>
<section id="정규표현식" class="level3">
<h3 class="anchored" data-anchor-id="정규표현식">정규표현식</h3>
</section>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [7]:</pre></div><div id="misinfo-regex" class="cell" data-tags="[]" data-execution_count="7">
<details open="">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> estimate_tokens(text):</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    tokens <span class="op">=</span> re.findall(<span class="vs">r'\b\w+\b|\S'</span>, text)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">len</span>(tokens)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"정규표현식 추정토큰수: </span><span class="sc">{</span>estimate_tokens(contents)<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>정규표현식 추정토큰수: 7974</code></pre>
</div>
</div></div>
<div id="17ce2870-b5cd-40aa-a0bc-d77070dcc23c" class="cell markdown">
<section id="tiktoken" class="level3">
<h3 class="anchored" data-anchor-id="tiktoken"><code>tiktoken</code></h3>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [8]:</pre></div><div id="cell-misinfo-tiktoken" class="cell" data-tags="[]" data-execution_count="8">
<details open="">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> tiktoken</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> num_tokens_from_string(string: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Returns the number of tokens in a text string."""</span>    </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    encoding <span class="op">=</span> tiktoken.get_encoding(<span class="st">"cl100k_base"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    num_tokens <span class="op">=</span> <span class="bu">len</span>(encoding.encode(string))</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> num_tokens</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co"># num_tokens_from_string("Hello World!",)</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>num_tokens<span class="op">=</span>num_tokens_from_string(contents)</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>num_tokens</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="misinfo-tiktoken" class="cell-output cell-output-display" data-execution_count="8">
<pre><code>7852</code></pre>
</div>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [9]:</pre></div><div id="misinfo-price" class="cell" data-tags="[]" data-execution_count="9">
<details open="">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 출처: https://github.com/OpsConfig/OpenAI_Lab/blob/3a8c55160a6790fc790ef1c2c797d83c716eee94/Context-based-search-Version2.ipynb</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Based on https://openai.com/api/pricing/ on 01/29/2023</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># If you were using this for approximating pricing with Azure OpenAI adjust the values below with: https://azure.microsoft.com/pricing/details/cognitive-services/openai-service/</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">#MODEL  USAGE</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Ada     v1 $0.0040 / 1K tokens</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Babbage v1 $0.0050 / 1K tokens</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Curie   v1 $0.0200 / 1K tokens</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Davinci v1 $0.2000 / 1K tokens</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co">#MODEL  USAGE</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co">#Ada     v2 $0.0004 / 1K tokens</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co">#This Ada model, text-embedding-ada-002, is a better and lower cost replacement for our older embedding models. </span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>n_tokens_sum <span class="op">=</span> num_tokens</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>ada_v1_embeddings_cost <span class="op">=</span> (n_tokens_sum<span class="op">/</span><span class="dv">1000</span>) <span class="op">*</span><span class="fl">.0040</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>babbage_v1_embeddings_cost <span class="op">=</span> (n_tokens_sum<span class="op">/</span><span class="dv">1000</span>) <span class="op">*</span><span class="fl">.0050</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>curie_v1_embeddings_cost <span class="op">=</span> (n_tokens_sum<span class="op">/</span><span class="dv">1000</span>) <span class="op">*</span><span class="fl">.02</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>davinci_v1_embeddings_cost <span class="op">=</span> (n_tokens_sum<span class="op">/</span><span class="dv">1000</span>) <span class="op">*</span><span class="fl">.2</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>ada_v2_embeddings_cost <span class="op">=</span> (n_tokens_sum<span class="op">/</span><span class="dv">1000</span>) <span class="op">*</span><span class="fl">.0004</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Number of tokens: "</span> <span class="op">+</span> <span class="bu">str</span>(n_tokens_sum) <span class="op">+</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"MODEL        VERSION    COST"</span>)</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"-----------------------------------"</span>)</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Ada"</span> <span class="op">+</span> <span class="st">"</span><span class="ch">\t\t</span><span class="st">"</span> <span class="op">+</span> <span class="st">"v1"</span> <span class="op">+</span> <span class="st">"</span><span class="ch">\t</span><span class="st">$"</span> <span class="op">+</span> <span class="st">'</span><span class="sc">%.8s</span><span class="st">'</span> <span class="op">%</span> <span class="bu">str</span>(ada_v1_embeddings_cost))</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Babbage"</span> <span class="op">+</span> <span class="st">"</span><span class="ch">\t\t</span><span class="st">"</span> <span class="op">+</span> <span class="st">"v1"</span> <span class="op">+</span> <span class="st">"</span><span class="ch">\t</span><span class="st">$"</span> <span class="op">+</span> <span class="st">'</span><span class="sc">%.8s</span><span class="st">'</span> <span class="op">%</span> <span class="bu">str</span>(babbage_v1_embeddings_cost))</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Curie"</span> <span class="op">+</span> <span class="st">"</span><span class="ch">\t\t</span><span class="st">"</span> <span class="op">+</span> <span class="st">"v1"</span> <span class="op">+</span> <span class="st">"</span><span class="ch">\t</span><span class="st">$"</span> <span class="op">+</span> <span class="st">'</span><span class="sc">%.8s</span><span class="st">'</span> <span class="op">%</span> <span class="bu">str</span>(curie_v1_embeddings_cost))</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Davinci"</span> <span class="op">+</span> <span class="st">"</span><span class="ch">\t\t</span><span class="st">"</span> <span class="op">+</span> <span class="st">"v1"</span> <span class="op">+</span> <span class="st">"</span><span class="ch">\t</span><span class="st">$"</span> <span class="op">+</span> <span class="st">'</span><span class="sc">%.8s</span><span class="st">'</span> <span class="op">%</span> <span class="bu">str</span>(davinci_v1_embeddings_cost))</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Ada"</span> <span class="op">+</span> <span class="st">"</span><span class="ch">\t\t</span><span class="st">"</span> <span class="op">+</span> <span class="st">"v2"</span> <span class="op">+</span> <span class="st">"</span><span class="ch">\t</span><span class="st">$"</span> <span class="op">+</span> <span class="st">'</span><span class="sc">%.8s</span><span class="st">'</span> <span class="op">%</span><span class="bu">str</span>(ada_v2_embeddings_cost))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Number of tokens: 7852

MODEL        VERSION    COST
-----------------------------------
Ada     v1  $0.031408
Babbage     v1  $0.03926
Curie       v1  $0.15704
Davinci     v1  $1.570400
Ada     v2  $0.003140</code></pre>
</div>
</div></div>
<div id="4f408bcf-c4e3-448b-8f2a-a857b5bcbd55" class="cell markdown">
<section id="임베딩" class="level2">
<h2 class="anchored" data-anchor-id="임베딩">임베딩</h2>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [10]:</pre></div><div id="misinfo-embedding2" class="cell" data-tags="[]" data-execution_count="10">
<details open="">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> openai</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>openai.api_key  <span class="op">=</span> os.getenv(<span class="st">'ENV_OPENAI_API_KEY'</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> generate_embeddings(text, model<span class="op">=</span><span class="st">"text-embedding-ada-002"</span>):</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> openai.Embedding.create(<span class="bu">input</span> <span class="op">=</span> [text], model<span class="op">=</span>model)[<span class="st">'data'</span>][<span class="dv">0</span>][<span class="st">'embedding'</span>]</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co">#contents_embedding = generate_embeddings(contents)</span></span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div></div>
<div class="cell-container"><div class="cell-decorator"><pre>In [9]:</pre></div><div id="eec208e9-8455-446b-ba84-dfa52a5c5710" class="cell" data-tags="[]">
<details open="">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(contents_embedding)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div></div>
<div id="146f02b4-1bde-4a4e-8619-c28abf6e47e8" class="cell markdown">
<section id="텍스트-쪼개기" class="level2">
<h2 class="anchored" data-anchor-id="텍스트-쪼개기">텍스트 쪼개기</h2>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [12]:</pre></div><div id="misinfo-pandas" class="cell" data-tags="[]" data-execution_count="12">
<details open="">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>sentences <span class="op">=</span> contents.split(<span class="st">". "</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame(sentences, columns<span class="op">=</span>[<span class="st">'text'</span>])</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.head())</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                                text
0                      Well, thank you very much, Dr
1                                                Ahn
2  This is a real pleasure to be able to speak ac...
3  I wish I was there in person, but I did get th...
4                               So thank you so much</code></pre>
</div>
</div></div>
<div id="9f8eea67-ebf5-4975-9849-93fff956ef05" class="cell markdown">
<section id="임베딩-1" class="level2">
<h2 class="anchored" data-anchor-id="임베딩-1">임베딩</h2>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [14]:</pre></div><div id="misinfo-embedding" class="cell" data-tags="[]" data-execution_count="14">
<details open="">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> uuid</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_embedding(text: <span class="bu">str</span>, model<span class="op">=</span><span class="st">"text-embedding-ada-002"</span>) <span class="op">-&gt;</span> <span class="bu">list</span>[<span class="bu">float</span>]:</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> openai.Embedding.create(<span class="bu">input</span><span class="op">=</span>[text], model<span class="op">=</span>model)[<span class="st">"data"</span>][<span class="dv">0</span>][<span class="st">"embedding"</span>]</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># embedding = get_embedding("Your text goes here", model="text-embedding-ada-002")</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># print(len(embedding))</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># df['n_tokens'] = df["embedding"].apply(lambda x: len(x))</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"embedding"</span>] <span class="op">=</span> df.text.<span class="bu">apply</span>(<span class="kw">lambda</span> x: get_embedding(x))</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'vector_id'</span>] <span class="op">=</span> [<span class="bu">str</span>(uuid.uuid4()) <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(df))]</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>df.to_csv(<span class="st">"misinfo-embeddings.csv"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div></div>
<div id="5ff9852c-7b4b-4491-a65d-bca90e294f0a" class="cell markdown">
<section id="벡터-데이터베이스-1" class="level2">
<h2 class="anchored" data-anchor-id="벡터-데이터베이스-1">벡터 데이터베이스</h2>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [15]:</pre></div><div id="cell-misinfo-create-db" class="cell" data-tags="[]" data-execution_count="15">
<details open="">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pick a name for the new index</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>index_name <span class="op">=</span> <span class="st">'misinfo'</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check whether the index with the same name already exists - if so, delete it</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> index_name <span class="kw">in</span> pinecone.list_indexes():</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    pinecone.delete_index(index_name)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates new index</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>pinecone.create_index(name<span class="op">=</span>index_name, dimension<span class="op">=</span><span class="bu">len</span>(df[<span class="st">'embedding'</span>][<span class="dv">0</span>]))</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>index <span class="op">=</span> pinecone.Index(index_name<span class="op">=</span>index_name)</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Confirm our index was created</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>pinecone.list_indexes()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="misinfo-create-db" class="cell-output cell-output-display" data-execution_count="15">
<pre><code>['misinfo']</code></pre>
</div>
</div></div>
<div id="6213737f-f9a8-4ccb-8372-0463edc96d4b" class="cell markdown">
<section id="임베딩-db-삽입" class="level2">
<h2 class="anchored" data-anchor-id="임베딩-db-삽입">임베딩 DB 삽입</h2>
<p>https://towardsdatascience.com/crud-with-pinecone-ee6b6f8b54e8</p>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [16]:</pre></div><div id="cell-misinfo-upsert" class="cell" data-tags="[]" data-execution_count="16">
<details open="">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> itertools</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> chunks(iterable, batch_size<span class="op">=</span><span class="dv">100</span>):</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    it <span class="op">=</span> <span class="bu">iter</span>(iterable)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    chunk <span class="op">=</span> <span class="bu">tuple</span>(itertools.islice(it, batch_size))</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> chunk:</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> chunk</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>        chunk <span class="op">=</span> <span class="bu">tuple</span>(itertools.islice(it, batch_size))</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> batch <span class="kw">in</span> chunks([(<span class="bu">str</span>(t), v) <span class="cf">for</span> t, v <span class="kw">in</span> <span class="bu">zip</span>(df.vector_id, df.embedding)]):</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    index.upsert(vectors<span class="op">=</span>batch, namespace <span class="op">=</span> <span class="st">"misinfo_namespace"</span>)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>index.describe_index_stats()    </span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="misinfo-upsert" class="cell-output cell-output-display" data-execution_count="16">
<pre><code>{'dimension': 1536,
 'index_fullness': 0.0,
 'namespaces': {'misinfo_namespace': {'vector_count': 368}},
 'total_vector_count': 368}</code></pre>
</div>
</div></div>
<div id="b55afb23-9fa1-48a1-aa3b-e1a99bdf1d4f" class="cell markdown">
<section id="검색" class="level2">
<h2 class="anchored" data-anchor-id="검색">검색</h2>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [17]:</pre></div><div id="cell-misinfo-query" class="cell" data-tags="[]" data-execution_count="17">
<details open="">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>pd.set_option(<span class="st">'display.max_colwidth'</span>, <span class="va">None</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> openai.embeddings_utils <span class="im">import</span> get_embedding, cosine_similarity</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_embedding(text, model<span class="op">=</span><span class="st">"text-embedding-ada-002"</span>):</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>   <span class="cf">return</span> openai.Embedding.create(<span class="bu">input</span> <span class="op">=</span> [text], model<span class="op">=</span>model)[<span class="st">'data'</span>][<span class="dv">0</span>][<span class="st">'embedding'</span>]</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>df_similarities <span class="op">=</span> df.copy()</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> search_docs(df, user_query, top_n<span class="op">=</span><span class="dv">3</span>):</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    embedding <span class="op">=</span> get_embedding(user_query, model<span class="op">=</span><span class="st">"text-embedding-ada-002"</span>)</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    df_similarities[<span class="st">"similarities"</span>] <span class="op">=</span> df.embedding.<span class="bu">apply</span>(<span class="kw">lambda</span> x: cosine_similarity(x, embedding))</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> (</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>        df_similarities.sort_values(<span class="st">"similarities"</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>        .head(top_n)</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> res</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>question <span class="op">=</span> <span class="st">"why misinformation is dangerous?</span><span class="ch">\n\n</span><span class="st">"</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> search_docs(df, question, top_n<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>res.text</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="misinfo-query" class="cell-output cell-output-display" data-execution_count="17">
<pre><code>186    And we know that, you know, our surgeon general and other major leaders around the world have recognized the ways in which misinformation can affect our health, and they can affect the health of democracies
130                                                                                                                                                                And bullshit is a part of the misinformation story
16                                                                                                                We've studied misinformation during the pandemic and during elections and all sorts of other topics
Name: text, dtype: object</code></pre>
</div>
</div></div>
<div id="a4d3326d-4a6f-49fe-b744-e2ed78877d1c" class="cell markdown">
<section id="시각화" class="level1">
<h1>시각화</h1>
</section>
</div>
<div class="cell-container"><div class="cell-decorator"><pre>In [16]:</pre></div><div id="489f3ec6-c832-45b5-9944-d1f870030680" class="cell" data-tags="[]">
<details open="">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nomic <span class="im">import</span> atlas</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> nomic</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>nomic.login(os.getenv(<span class="st">'NOMIC_API_KEY'</span>))</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>project <span class="op">=</span> atlas.map_embeddings(</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    embeddings<span class="op">=</span>df[<span class="st">'embedding'</span>].to_numpy()    </span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div></div>


     </main> <!-- /main -->  <script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "복사완료!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "복사완료!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        return container.innerHTML
      } else {
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>  </div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><a href="https://quarto.org/">Quarto</a> 개발</p>
</div>   
    <div class="nav-footer-center">
<p><a href="mailto:admin@r2bit.com">한국 R 사용자회</a></p>
</div>
    <div class="nav-footer-right">
<p><a href="https://github.com/bit2r/chatGPT">Github 코드 저장소</a></p>
</div>
  </div>
</footer> 
  
</body></html>